{% extends "base.html" %}
{% block title %}Settings â€” CampusManager{% endblock %}
{% block sidebar_content %}
    <div class="bg-white rounded-2xl p-6 border border-gray-100 shadow-sm w-full h-full lg:h-auto">
        <h3 class="font-bold text-text-dark mb-4 flex items-center gap-2">
            <i data-feather="shield" class="w-4 h-4 text-primary"></i> Security Status
        </h3>
        <div class="space-y-4">
            <div class="p-3 bg-green-50 rounded-xl border border-green-100">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-600">
                        <i data-feather="lock" class="w-4 h-4"></i>
                    </div>
                    <div>
                        <p class="text-xs font-bold text-green-700 uppercase">Password</p>
                        <p class="text-sm font-medium text-green-900">Strong</p>
                    </div>
                </div>
            </div>
            <div class="p-3 bg-blue-50 rounded-xl border border-blue-100">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600">
                        <i data-feather="shield-check" class="w-4 h-4"></i>
                    </div>
                    <div>
                        <p class="text-xs font-bold text-blue-700 uppercase">Role</p>
                        <p class="text-sm font-medium text-blue-900">Administrator</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block content %}
    <section class="max-w-4xl mx-auto space-y-8">
        <div class="flex items-end justify-between">
            <div>
                <h1 class="text-3xl font-bold text-text-dark">Admin Settings</h1>
                <p class="text-text-light mt-1">Manage your administrator profile and security</p>
            </div>
        </div>
        <!-- Profile Settings -->
        <div class="bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden">
            <div class="p-8 border-b border-gray-100">
                <h2 class="text-xl font-bold text-text-dark flex items-center gap-3">
                    <span class="w-10 h-10 rounded-xl bg-primary/10 text-primary flex items-center justify-center">
                        <i data-feather="user" class="w-5 h-5"></i>
                    </span>
                    Profile Information
                </h2>
            </div>
            <div class="p-8 space-y-8">
                <!-- Avatar -->
                <div class="flex items-center gap-6">
                    <div class="relative group">
                        <div class="w-24 h-24 rounded-full bg-gray-100 flex items-center justify-center text-text-light border-4 border-white shadow-lg overflow-hidden">
                            <span class="text-2xl font-bold text-primary">{{ current_user.name[0] | upper }}</span>
                        </div>
                        <button type="button"
                                class="absolute bottom-0 right-0 w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center border-2 border-white shadow-sm hover:scale-110 transition-transform">
                            <i data-feather="camera" class="w-4 h-4"></i>
                        </button>
                    </div>
                    <div>
                        <h3 class="font-bold text-text-dark">Profile Photo</h3>
                        <p class="text-xs text-text-light mt-1">Update your profile picture.</p>
                    </div>
                </div>
                <form action="{{ url_for("views.settings") }}"
                      method="post"
                      class="space-y-6">
                    <!-- Read Only Info -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label class="text-xs font-bold text-text-light uppercase tracking-wide">Full Name</label>
                            <div class="relative">
                                <input value="{{ current_user.name }}"
                                       class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 text-text-light font-medium cursor-not-allowed focus:outline-none"
                                       readonly />
                                <i data-feather="lock"
                                   class="w-4 h-4 text-gray-400 absolute right-4 top-3.5"></i>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="text-xs font-bold text-text-light uppercase tracking-wide">Email Address</label>
                            <div class="relative">
                                <input value="{{ current_user.email }}"
                                       class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 text-text-light font-medium cursor-not-allowed focus:outline-none"
                                       readonly />
                                <i data-feather="lock"
                                   class="w-4 h-4 text-gray-400 absolute right-4 top-3.5"></i>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="text-xs font-bold text-text-dark uppercase tracking-wide">Phone Number</label>
                            <input type="text"
                                   name="phone"
                                   value="{{ current_user.phone or '' }}"
                                   placeholder="+91..."
                                   class="w-full bg-white border border-gray-200 rounded-xl px-4 py-3 text-text-dark font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all" />
                        </div>
                    </div>
                    <div class="flex justify-end pt-2">
                        <button type="submit"
                                class="px-8 py-3 rounded-xl bg-primary text-white font-bold hover:bg-primary-dark hover:scale-105 transition-all shadow-lg shadow-primary/20">
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <!-- Password Settings -->
        <div class="bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden mt-8">
            <div class="p-8 border-b border-gray-100">
                <h2 class="text-xl font-bold text-text-dark flex items-center gap-3">
                    <span class="w-10 h-10 rounded-xl bg-emerald-50 text-emerald-600 flex items-center justify-center">
                        <i data-feather="shield" class="w-5 h-5"></i>
                    </span>
                    Security
                </h2>
            </div>
            <div class="p-8">
                <form action="{{ url_for("views.settings") }}"
                      method="post"
                      class="max-w-xl space-y-6">
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-text-dark uppercase tracking-wide">Current Password</label>
                        <input type="password"
                               name="current_password"
                               required
                               class="w-full bg-white border border-gray-200 rounded-xl px-4 py-3 text-text-dark font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all"
                               placeholder="Enter current password" />
                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label class="text-xs font-bold text-text-dark uppercase tracking-wide">New Password</label>
                            <input type="password"
                                   name="new_password"
                                   required
                                   class="w-full bg-white border border-gray-200 rounded-xl px-4 py-3 text-text-dark font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all"
                                   placeholder="Min. 6 characters" />
                        </div>
                        <div class="space-y-2">
                            <label class="text-xs font-bold text-text-dark uppercase tracking-wide">Confirm Password</label>
                            <input type="password"
                                   name="confirm_password"
                                   required
                                   class="w-full bg-white border border-gray-200 rounded-xl px-4 py-3 text-text-dark font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all"
                                   placeholder="Re-enter new password" />
                        </div>
                    </div>
                    <div class="flex justify-end pt-2">
                        <button type="submit"
                                class="px-6 py-3 rounded-xl bg-text-dark text-white font-bold hover:bg-black transition-colors shadow-lg shadow-gray-200">
                            Update Password
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        if (typeof feather !== "undefined") {
            feather.replace();
        }
    });
    </script>
{% endblock %}
